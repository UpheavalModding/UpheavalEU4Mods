##############################
# Age Overhaul Options       #
# Carryover Selection Menu   #
# Initialization             #
#                            #
# Written by von_der_borch   #
##############################

namespace = age_overhaul_menu_carryover_selection_initialization

# Age of Discovery Initialization
country_event = {
	id = age_overhaul_menu_carryover_selection_initialization.1
	title = age_overhaul_menu_carryover_selection_initialization.1.title
	desc = age_overhaul_skipper_desc
	picture = CITY_DEVELOPMENT_eventPicture

	hidden = yes
	mean_time_to_happen = { days = 0 }

	trigger = {
		has_global_flag = age_overhaul_initialized
		has_global_flag = age_overhaul_option_carryover_enabled
		NOT = { current_age = age_of_discovery }
		current_age = age_of_reformation
		NOT = { current_age = age_of_absolutism }
		NOT = { current_age = age_of_revolutions }
		NOT = { has_country_flag = age_overhaul_age_of_discovery_abilities_selected }
		NOT = { has_country_flag = age_overhaul_age_ability_purchasing }
	}

	immediate = {
		every_country = {
			limit = {
				NOT = { has_country_flag = age_overhaul_age_of_discovery_abilities_selected }
				NOT = { has_country_flag = age_overhaul_age_ability_purchasing }
			}

			set_country_flag = age_overhaul_age_ability_purchasing
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_discovery
				which = 1
			}
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_reformation
				which = 1
			}
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_absolutism
				which = 1
			}
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_revolutions
				which = 1
			}

			country_event = { id = age_overhaul_menu_carryover_selection.1 }
		}
	}

	# Close the event if it manages to pop up
	option = {
		name = age_overhaul_options_skip
	}
}

# Age of Reformation Initialization
country_event = {
	id = age_overhaul_menu_carryover_selection_initialization.2
	title = age_overhaul_menu_carryover_selection_initialization.2.title
	desc = age_overhaul_skipper_desc
	picture = CITY_DEVELOPMENT_eventPicture

	hidden = yes
	mean_time_to_happen = { days = 0 }

	trigger = {
		has_global_flag = age_overhaul_initialized
		has_global_flag = age_overhaul_option_carryover_enabled
		NOT = { current_age = age_of_discovery }
		NOT = { current_age = age_of_reformation }
		current_age = age_of_absolutism
		NOT = { current_age = age_of_revolutions }
		NOT = { has_country_flag = age_overhaul_age_of_reformation_abilities_selected }
		NOT = { has_country_flag = age_overhaul_age_ability_purchasing }
	}

	immediate = {
		every_country = {
			limit = {
				NOT = { has_country_flag = age_overhaul_age_of_reformation_abilities_selected }
				NOT = { has_country_flag = age_overhaul_age_ability_purchasing }
			}

			set_country_flag = age_overhaul_age_ability_purchasing
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_discovery
				which = 2
			}
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_reformation
				which = 1
			}
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_absolutism
				which = 1
			}
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_revolutions
				which = 1
			}

			country_event = { id = age_overhaul_menu_carryover_selection.1 }
		}
	}

	# Close the event if it manages to pop up
	option = {
		name = age_overhaul_options_skip
	}
}

# Age of Absolutism Initialization
country_event = {
	id = age_overhaul_menu_carryover_selection_initialization.3
	title = age_overhaul_menu_carryover_selection_initialization.3.title
	desc = age_overhaul_skipper_desc
	picture = CITY_DEVELOPMENT_eventPicture

	hidden = yes
	mean_time_to_happen = { days = 0 }

	trigger = {
		has_global_flag = age_overhaul_initialized
		has_global_flag = age_overhaul_option_carryover_enabled
		NOT = { current_age = age_of_discovery }
		NOT = { current_age = age_of_reformation }
		NOT = { current_age = age_of_absolutism }
		current_age = age_of_revolutions
		NOT = { has_country_flag = age_overhaul_age_of_absolutism_abilities_selected }
		NOT = { has_country_flag = age_overhaul_age_ability_purchasing }
	}

	immediate = {
		every_country = {
			limit = {
				NOT = { has_country_flag = age_overhaul_age_of_absolutism_abilities_selected }
				NOT = { has_country_flag = age_overhaul_age_ability_purchasing }
			}

			set_country_flag = age_overhaul_age_ability_purchasing
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_discovery
				which = 3
			}
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_reformation
				which = 2
			}
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_absolutism
				which = 1
			}
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_revolutions
				which = 1
			}

			country_event = { id = age_overhaul_menu_carryover_selection.1 }
		}
	}

	# Close the event if it manages to pop up
	option = {
		name = age_overhaul_options_skip
	}
}

# Age of Revolutions Initialization
country_event = {
	id = age_overhaul_menu_carryover_selection_initialization.4
	title = age_overhaul_menu_carryover_selection_initialization.4.title
	desc = age_overhaul_skipper_desc
	picture = CITY_DEVELOPMENT_eventPicture

	hidden = yes
	mean_time_to_happen = { days = 0 }

	trigger = {
		has_global_flag = age_overhaul_initialized
		has_global_flag = age_overhaul_option_carryover_enabled
		NOT = { current_age = age_of_discovery }
		NOT = { current_age = age_of_reformation }
		NOT = { current_age = age_of_absolutism }
		NOT = { current_age = age_of_revolutions }
		NOT = { has_country_flag = age_overhaul_age_of_revolutions_abilities_selected }
		NOT = { has_country_flag = age_overhaul_age_ability_purchasing }
	}

	immediate = {
		every_country = {
			limit = {
				NOT = { has_country_flag = age_overhaul_age_of_revolutions_abilities_selected }
				NOT = { has_country_flag = age_overhaul_age_ability_purchasing }
			}

			set_country_flag = age_overhaul_age_ability_purchasing
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_discovery
				which = 4
			}
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_reformation
				which = 3
			}
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_absolutism
				which = 2
			}
			set_variable = {
				which = age_overhaul_golden_splendor_cost_multiplier_age_of_revolutions
				which = 1
			}

			country_event = { id = age_overhaul_menu_carryover_selection.1 }
		}
	}

	# Close the event if it manages to pop up
	option = {
		name = age_overhaul_options_skip
	}
}

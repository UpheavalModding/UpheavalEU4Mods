##############################
# Age Overhaul               #
# Age of Revolutions         #
#                            #
# Written by von_der_borch   #
##############################

namespace = age_overhaul_age_of_revolution

# Initialization 
country_event = {
	id = age_overhaul_age_of_revolution.0
	title = age_overhaul_age_of_revolution.0.title
	desc = age_overhaul_age_of_revolution.0.desc
	picture = CITY_DEVELOPMENT_eventPicture

	hidden = yes
	mean_time_to_happen = { days = 0 }

	trigger = {
		has_global_flag = age_overhaul_initialized
		NOT = { current_age = age_of_revolutions }
		NOT = { has_country_flag = age_overhaul_age_of_revolution_abilities_selected }
		NOT = { has_country_flag = age_overhaul_age_of_revolution_abilities_selecting }
		has_country_flag = age_overhaul_age_of_discovery_abilities_selected
		has_country_flag = age_overhaul_age_of_reformation_abilities_selected
		has_country_flag = age_overhaul_age_of_absolutism_abilities_selected
	}

	immediate = {
		hidden_effect = {
			set_country_flag = age_overhaul_age_of_revolution_abilities_selecting

			# set the number of abilities currently selected for carryover
			set_variable = {
				which = age_overhaul_ability_carryover_currently_selected
				value = 0
			}

			# Set the number of abilities that will be allowed to be carried over
			set_variable = {
				which = age_overhaul_ability_carryover_max_abilities
				value = 0
			}

			# Count up all the Abilities that were selected in the last age
			if = {
				limit = {
					OR = {
						has_country_flag = age_overhaul_age_ability_ab_allow_anti_revolutionary_zeal
						has_global_flag = age_overhaul_option_skipped_age_of_revolution
					}
				}
				change_variable = {
					which = age_overhaul_ability_carryover_max_abilities
					value = 1
				}
			}
			if = {
				limit = {
					OR = {
						has_country_flag = age_overhaul_age_ability_ab_napoleonic_warfare
						has_global_flag = age_overhaul_option_skipped_age_of_revolution
					}
				}
				change_variable = {
					which = age_overhaul_ability_carryover_max_abilities
					value = 1
				}
			}
			if = {
				limit = {
					OR = {
						has_country_flag = age_overhaul_age_ability_ab_force_march
						has_global_flag = age_overhaul_option_skipped_age_of_revolution
					}
				}
				change_variable = {
					which = age_overhaul_ability_carryover_max_abilities
					value = 1
				}
			}
			if = {
				limit = {
					OR = {
						has_country_flag = age_overhaul_age_ability_ab_more_ships_can_fire
						has_global_flag = age_overhaul_option_skipped_age_of_revolution
					}
				}
				change_variable = {
					which = age_overhaul_ability_carryover_max_abilities
					value = 1
				}
			}
			if = {
				limit = {
					OR = {
						has_country_flag = age_overhaul_age_ability_ab_no_distance_for_core
						has_global_flag = age_overhaul_option_skipped_age_of_revolution
					}
				}
				change_variable = {
					which = age_overhaul_ability_carryover_max_abilities
					value = 1
				}
			}
			if = {
				limit = {
					OR = {
						has_country_flag = age_overhaul_age_ability_ab_same_contine_lib_desire
						has_global_flag = age_overhaul_option_skipped_age_of_revolution
					}
				}
				change_variable = {
					which = age_overhaul_ability_carryover_max_abilities
					value = 1
				}
			}
			if = {
				limit = {
					OR = {
						has_country_flag = age_overhaul_age_ability_ab_backrow_artillery
						has_global_flag = age_overhaul_option_skipped_age_of_revolution
					}
				}
				change_variable = {
					which = age_overhaul_ability_carryover_max_abilities
					value = 1
				}
			}
			if = {
				limit = {
					OR = {
						has_country_flag = age_overhaul_age_ability_ab_pru_military
						has_global_flag = age_overhaul_option_skipped_age_of_revolution
					}
				}
				change_variable = {
					which = age_overhaul_ability_carryover_max_abilities
					value = 1
				}
			}
			if = {
				limit = {
					OR = {
						has_country_flag = age_overhaul_age_ability_ab_gbr_fleet
						has_global_flag = age_overhaul_option_skipped_age_of_revolution
					}
				}
				change_variable = {
					which = age_overhaul_ability_carryover_max_abilities
					value = 1
				}
			}
			if = {
				limit = {
					OR = {
						has_country_flag = age_overhaul_age_ability_ab_russia_boost
						has_global_flag = age_overhaul_option_skipped_age_of_revolution
					}
				}
				change_variable = {
					which = age_overhaul_ability_carryover_max_abilities
					value = 1
				}
			}
			if = {
				limit = {
					OR = {
						has_country_flag = age_overhaul_age_ability_ab_austria_rep
						has_global_flag = age_overhaul_option_skipped_age_of_revolution
					}
				}
				change_variable = {
					which = age_overhaul_ability_carryover_max_abilities
					value = 1
				}
			}

			# If the max abilities is greater than what is set for the age, set it down to the max value for the age
			if = {
				limit = {
					check_variable = {
						which = age_overhaul_ability_carryover_max_abilities
						which = age_overhaul_option_max_age_abilities_age_of_revolution
					}
				}

				set_variable = {
					which = age_overhaul_ability_carryover_max_abilities
					which = age_overhaul_option_max_age_abilities_age_of_revolution
				}
			}

			# Helper variable
			set_variable = {
				which = age_overhaul_ability_carryover_max_abilities_invalid
				which = age_overhaul_ability_carryover_max_abilities
			}
			change_variable = {
				which = age_overhaul_ability_carryover_max_abilities_invalid
				value = 1
			}
		}
	}

	# Close the event if it manages to pop up
	option = {
		name = age_overhaul_options_skip
		country_event = { id = age_overhaul_age_of_revolution.1 }
	}
}

# Select Age Abilities to Carryover
country_event = {
	id = age_overhaul_age_of_revolution.1
	title = age_overhaul_age_of_revolution.1.title
	desc = age_overhaul_age_carryover_desc
	picture = CITY_DEVELOPMENT_eventPicture

	is_triggered_only = yes
	
	option = {
		name = age_overhaul_confirm_abilities
		highlight = yes

		trigger = {
			NOT = {
				check_variable = {
					which = age_overhaul_ability_carryover_currently_selected
					which = age_overhaul_ability_carryover_max_abilities_invalid
				}
				AND = {
					check_variable = {
						which = age_overhaul_ability_carryover_max_abilities
						value = 0
					}
					NOT = {
						check_variable = {
							which = age_overhaul_ability_carryover_max_abilities
							value = 1
						}
					}
				}
			}
		}

		hidden_effect = {
			country_event = { id = age_overhaul_age_of_revolution.2 }
		}
	}
	
	option = {
		name = age_overhaul_skip_abilities
		highlight = yes

		ai_chance = { factor = 1000 }
		trigger = {
			check_variable = {
				which = age_overhaul_ability_carryover_max_abilities
				value = 0
			}
			NOT = {
				check_variable = {
					which = age_overhaul_ability_carryover_max_abilities
					value = 1
				}
			}
		}

		hidden_effect = {
			set_country_flag = age_overhaul_age_of_revolution_abilities_selected
		}
	}

	# ab_allow_anti_revolutionary_zeal
	option = {
		name = age_overhaul_age_of_revolution.1.a.e
		
		set_country_flag = age_overhaul_ability_carryover_ab_allow_anti_revolutionary_zeal
		trigger = {
			NOT = { has_country_flag = age_overhaul_ability_carryover_ab_allow_anti_revolutionary_zeal }
			OR = {
				has_country_flag = age_overhaul_age_ability_ab_allow_anti_revolutionary_zeal
				has_global_flag = age_overhaul_option_skipped_age_of_revolution
			}
		}
		ai_chance = { factor = 10 }

		change_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}
	option = {
		name = age_overhaul_age_of_revolution.1.a.d
		
		clr_country_flag = age_overhaul_ability_carryover_ab_allow_anti_revolutionary_zeal
		trigger = {
			has_country_flag = age_overhaul_ability_carryover_ab_allow_anti_revolutionary_zeal
			ai = no
		}
		
		subtract_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}

	# ab_napoleonic_warfare
	option = {
		name = age_overhaul_age_of_revolution.1.b.e
		
		set_country_flag = age_overhaul_ability_carryover_ab_napoleonic_warfare
		trigger = {
			NOT = { has_country_flag = age_overhaul_ability_carryover_ab_napoleonic_warfare }
			OR = {
				has_country_flag = age_overhaul_age_ability_ab_napoleonic_warfare
				has_global_flag = age_overhaul_option_skipped_age_of_revolution
			}
		}
		ai_chance = { factor = 10 }

		change_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}
	option = {
		name = age_overhaul_age_of_revolution.1.b.d
		
		clr_country_flag = age_overhaul_ability_carryover_ab_napoleonic_warfare
		trigger = {
			has_country_flag = age_overhaul_ability_carryover_ab_napoleonic_warfare
			ai = no
		}
		
		subtract_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}

	# ab_force_march
	option = {
		name = age_overhaul_age_of_revolution.1.c.e
		
		set_country_flag = age_overhaul_ability_carryover_ab_force_march
		trigger = {
			NOT = { has_country_flag = age_overhaul_ability_carryover_ab_force_march }
			OR = {
				has_country_flag = age_overhaul_age_ability_ab_force_march
				has_global_flag = age_overhaul_option_skipped_age_of_revolution
			}
		}
		ai_chance = { factor = 10 }

		change_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}
	option = {
		name = age_overhaul_age_of_revolution.1.c.d
		
		clr_country_flag = age_overhaul_ability_carryover_ab_force_march
		trigger = {
			has_country_flag = age_overhaul_ability_carryover_ab_force_march
			ai = no
		}
		
		subtract_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}

	# ab_more_ships_can_fire
	option = {
		name = age_overhaul_age_of_revolution.1.d.e
		
		set_country_flag = age_overhaul_ability_carryover_ab_more_ships_can_fire
		trigger = {
			NOT = { has_country_flag = age_overhaul_ability_carryover_ab_more_ships_can_fire }
			OR = {
				has_country_flag = age_overhaul_age_ability_ab_more_ships_can_fire
				has_global_flag = age_overhaul_option_skipped_age_of_revolution
			}
		}
		ai_chance = { factor = 10 }

		change_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}
	option = {
		name = age_overhaul_age_of_revolution.1.d.d
		
		clr_country_flag = age_overhaul_ability_carryover_ab_more_ships_can_fire
		trigger = {
			has_country_flag = age_overhaul_ability_carryover_ab_more_ships_can_fire
			ai = no
		}
		
		subtract_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}

	# ab_no_distance_for_core
	option = {
		name = age_overhaul_age_of_revolution.1.e.e
		
		set_country_flag = age_overhaul_ability_carryover_ab_no_distance_for_core
		trigger = {
			NOT = { has_country_flag = age_overhaul_ability_carryover_ab_no_distance_for_core }
			OR = {
				has_country_flag = age_overhaul_age_ability_ab_no_distance_for_core
				has_global_flag = age_overhaul_option_skipped_age_of_revolution
			}
		}
		ai_chance = { factor = 10 }

		change_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}
	option = {
		name = age_overhaul_age_of_revolution.1.e.d
		
		clr_country_flag = age_overhaul_ability_carryover_ab_no_distance_for_core
		trigger = {
			has_country_flag = age_overhaul_ability_carryover_ab_no_distance_for_core
			ai = no
		}
		
		subtract_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}

	# ab_same_contine_lib_desire
	option = {
		name = age_overhaul_age_of_revolution.1.f.e
		
		set_country_flag = age_overhaul_ability_carryover_ab_same_contine_lib_desire
		trigger = {
			NOT = { has_country_flag = age_overhaul_ability_carryover_ab_same_contine_lib_desire }
			OR = {
				has_country_flag = age_overhaul_age_ability_ab_same_contine_lib_desire
				has_global_flag = age_overhaul_option_skipped_age_of_revolution
			}
		}
		ai_chance = { factor = 10 }

		change_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}
	option = {
		name = age_overhaul_age_of_revolution.1.f.d
		
		clr_country_flag = age_overhaul_ability_carryover_ab_same_contine_lib_desire
		trigger = {
			has_country_flag = age_overhaul_ability_carryover_ab_same_contine_lib_desire
			ai = no
		}
		
		subtract_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}

	# ab_backrow_artillery
	option = {
		name = age_overhaul_age_of_revolution.1.g.e
		
		set_country_flag = age_overhaul_ability_carryover_ab_backrow_artillery
		trigger = {
			NOT = { has_country_flag = age_overhaul_ability_carryover_ab_backrow_artillery }
			OR = {
				has_country_flag = age_overhaul_age_ability_ab_backrow_artillery
				has_global_flag = age_overhaul_option_skipped_age_of_revolution
			}
		}
		ai_chance = { factor = 10 }

		change_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}
	option = {
		name = age_overhaul_age_of_revolution.1.g.d
		
		clr_country_flag = age_overhaul_ability_carryover_ab_backrow_artillery
		trigger = {
			has_country_flag = age_overhaul_ability_carryover_ab_backrow_artillery
			ai = no
		}
		
		subtract_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}

	# ab_pru_military
	option = {
		name = age_overhaul_age_of_revolution.1.h.e
		
		set_country_flag = age_overhaul_ability_carryover_ab_pru_military
		trigger = {
			NOT = { has_country_flag = age_overhaul_ability_carryover_ab_pru_military }
			OR = {
				has_country_flag = age_overhaul_age_ability_ab_pru_military
				has_global_flag = age_overhaul_option_skipped_age_of_revolution
			}
		}
		ai_chance = { factor = 100 }

		change_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}
	option = {
		name = age_overhaul_age_of_revolution.1.h.d
		
		clr_country_flag = age_overhaul_ability_carryover_ab_pru_military
		trigger = {
			has_country_flag = age_overhaul_ability_carryover_ab_pru_military
			ai = no
		}
		
		subtract_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}

	# ab_gbr_fleet
	option = {
		name = age_overhaul_age_of_revolution.1.i.e
		
		set_country_flag = age_overhaul_ability_carryover_ab_gbr_fleet
		trigger = {
			NOT = { has_country_flag = age_overhaul_ability_carryover_ab_gbr_fleet }
			OR = {
				has_country_flag = age_overhaul_age_ability_ab_gbr_fleet
				has_global_flag = age_overhaul_option_skipped_age_of_revolution
			}
		}
		ai_chance = { factor = 100 }

		change_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}
	option = {
		name = age_overhaul_age_of_revolution.1.i.d
		
		clr_country_flag = age_overhaul_ability_carryover_ab_gbr_fleet
		trigger = {
			has_country_flag = age_overhaul_ability_carryover_ab_gbr_fleet
			ai = no
		}
		
		subtract_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}

	# ab_russia_boost
	option = {
		name = age_overhaul_age_of_revolution.1.j.e
		
		set_country_flag = age_overhaul_ability_carryover_ab_russia_boost
		trigger = {
			NOT = { has_country_flag = age_overhaul_ability_carryover_ab_russia_boost }
			OR = {
				has_country_flag = age_overhaul_age_ability_ab_russia_boost
				has_global_flag = age_overhaul_option_skipped_age_of_revolution
			}
		}
		ai_chance = { factor = 10 }

		change_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}
	option = {
		name = age_overhaul_age_of_revolution.1.j.d
		
		clr_country_flag = age_overhaul_ability_carryover_ab_russia_boost
		trigger = {
			has_country_flag = age_overhaul_ability_carryover_ab_russia_boost
			ai = no
		}
		
		subtract_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}

	# ab_austria_rep
	option = {
		name = age_overhaul_age_of_revolution.1.k.e
		
		set_country_flag = age_overhaul_ability_carryover_ab_austria_rep
		trigger = {
			NOT = { has_country_flag = age_overhaul_ability_carryover_ab_austria_rep }
			OR = {
				has_country_flag = age_overhaul_age_ability_ab_austria_rep
				has_global_flag = age_overhaul_option_skipped_age_of_revolution
			}
		}
		ai_chance = { factor = 10 }

		change_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}
	option = {
		name = age_overhaul_age_of_revolution.1.k.d
		
		clr_country_flag = age_overhaul_ability_carryover_ab_austria_rep
		trigger = {
			has_country_flag = age_overhaul_ability_carryover_ab_austria_rep
			ai = no
		}
		
		subtract_variable = {
			which = age_overhaul_ability_carryover_currently_selected
			value = 1
		}
		country_event = {
			id = age_overhaul_options_menu_skipper.6
		}
	}
}

# Assign the Bonuses that are Carrying Over
country_event = {
	id = age_overhaul_age_of_revolution.2
	title = age_overhaul_age_of_revolution.2.title
	desc = age_overhaul_age_of_revolution.2.desc
	picture = CITY_DEVELOPMENT_eventPicture

	hidden = yes
	is_triggered_only = yes

	immediate = {
		set_country_flag = age_overhaul_age_of_revolution_abilities_selected

		# ab_allow_anti_revolutionary_zeal
		if = {
			limit = {
				has_country_flag = age_overhaul_ability_carryover_ab_allow_anti_revolutionary_zeal
			}

			# 100%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_100
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_100_ab_allow_anti_revolutionary_zeal
					duration = -1
				}
			}

			# 50%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_50
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_50_ab_allow_anti_revolutionary_zeal
					duration = -1
				}
			}
		}

		# ab_napoleonic_warfare
		if = {
			limit = {
				has_country_flag = age_overhaul_ability_carryover_ab_napoleonic_warfare
			}

			# 100%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_100
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_100_ab_napoleonic_warfare
					duration = -1
				}
			}

			# 50%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_50
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_50_ab_napoleonic_warfare
					duration = -1
				}
			}
		}

		# ab_force_march
		if = {
			limit = {
				has_country_flag = age_overhaul_ability_carryover_ab_force_march
			}

			# 100%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_100
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_100_ab_force_march
					duration = -1
				}
			}

			# 50%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_50
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_50_ab_force_march
					duration = -1
				}
			}
		}

		# ab_more_ships_can_fire
		if = {
			limit = {
				has_country_flag = age_overhaul_ability_carryover_ab_more_ships_can_fire
			}

			# 100%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_100
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_100_ab_more_ships_can_fire
					duration = -1
				}
			}

			# 50%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_50
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_50_ab_more_ships_can_fire
					duration = -1
				}
			}
		}

		# ab_no_distance_for_core
		if = {
			limit = {
				has_country_flag = age_overhaul_ability_carryover_ab_no_distance_for_core
			}

			# 100%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_100
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_100_ab_no_distance_for_core
					duration = -1
				}
			}

			# 50%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_50
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_50_ab_no_distance_for_core
					duration = -1
				}
			}
		}

		# ab_same_contine_lib_desire
		if = {
			limit = {
				has_country_flag = age_overhaul_ability_carryover_ab_same_contine_lib_desire
			}

			# 100%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_100
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_100_ab_same_contine_lib_desire
					duration = -1
				}
			}

			# 50%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_50
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_50_ab_same_contine_lib_desire
					duration = -1
				}
			}
		}

		# ab_backrow_artillery
		if = {
			limit = {
				has_country_flag = age_overhaul_ability_carryover_ab_backrow_artillery
			}

			# 100%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_100
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_100_ab_backrow_artillery
					duration = -1
				}
			}

			# 50%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_50
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_50_ab_backrow_artillery
					duration = -1
				}
			}
		}

		# ab_pru_military
		if = {
			limit = {
				has_country_flag = age_overhaul_ability_carryover_ab_pru_military
			}

			# 100%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_100
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_100_ab_pru_military
					duration = -1
				}
			}

			# 50%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_50
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_50_ab_pru_military
					duration = -1
				}
			}
		}

		# ab_gbr_fleet
		if = {
			limit = {
				has_country_flag = age_overhaul_ability_carryover_ab_gbr_fleet
			}

			# 100%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_100
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_100_ab_gbr_fleet
					duration = -1
				}
			}

			# 50%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_50
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_50_ab_gbr_fleet
					duration = -1
				}
			}
		}

		# ab_russia_boost
		if = {
			limit = {
				has_country_flag = age_overhaul_ability_carryover_ab_russia_boost
			}

			# 100%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_100
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_100_ab_russia_boost
					duration = -1
				}
			}

			# 50%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_50
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_50_ab_russia_boost
					duration = -1
				}
			}
		}

		# ab_austria_rep
		if = {
			limit = {
				has_country_flag = age_overhaul_ability_carryover_ab_austria_rep
			}

			# 100%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_100
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_100_ab_austria_rep
					duration = -1
				}
			}

			# 50%
			if = {
				limit = {
					has_global_flag = age_overhaul_option_age_ability_carryover_power_50
				}
				add_country_modifier = {
					name = age_overhaul_age_ability_50_ab_austria_rep
					duration = -1
				}
			}
		}
	}
	
	option = {
		name = age_overhaul_confirm_abilities
	}

}

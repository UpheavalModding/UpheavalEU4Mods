##############################
# Age Overhaul Options       #
# Main Menu                  #
#                            #
# Written by von_der_borch   #
##############################

namespace = age_overhaul_options_main_menu

# Initialization 
country_event = {
	id = age_overhaul_options_main_menu.0
	title = age_overhaul_options_main_menu.0.title
	desc = age_overhaul_skipper_desc
	picture = CITY_DEVELOPMENT_eventPicture

	fire_only_once = yes
	hidden = yes
	is_triggered_only = yes

	immediate = {
		set_global_flag = age_overhaul_configuration

		if = {
			limit = { 
				NOT = { current_age = age_of_discovery }
			}
			
			set_global_flag = age_overhaul_option_skipped_age
		}
	}

	# Close the event if it manages to pop up
	option = {
		name = age_overhaul_options_skip
		country_event = { id = age_overhaul_options_main_menu.1 }
	}
}

# Main Menu
country_event = {
	id = age_overhaul_options_main_menu.1
	title = age_overhaul_options_main_menu.1.title
	desc = age_overhaul_options_menu_desc
	picture = CITY_DEVELOPMENT_eventPicture

	major = yes
	is_triggered_only = yes

	# Open Sub-menu to choose whether or not to allow country-specific age abilities to be "unlocked" for all
	option = {
		name = age_overhaul_options_main_menu.1.b
		country_event = { id = age_overhaul_options_menu_country_abilities.1 }
	}

	# Open Sub-menu to choose the amount of carryover splendor that gets generated per new age ability bought in an age
	option = {
		name = age_overhaul_options_main_menu.1.c
		country_event = { id = age_overhaul_options_menu_golden_splendor_generation.1 }
	}

	# Open Sub-menu to choose the cost of age abilities being carried over
	option = {
		name = age_overhaul_options_main_menu.1.d
		country_event = { id = age_overhaul_options_menu_golden_splendor_cost.1 }
	}

	# Open Sub-menu to choose the Golden Splendor Age Multiplier
	option = {
		name = age_overhaul_options_main_menu.1.e
		country_event = { id = age_overhaul_options_menu_golden_splendor_multiplier.1 }
	}

	# Open Sub-menu to Change Starting Golden Splendor
	option = {
		name = age_overhaul_options_main_menu.1.f
		country_event = { id = age_overhaul_options_menu_starting_golden_splendor.1 }
	}

	# Open Sub-menu to Enable/Disable Decisions
	option = {
		name = age_overhaul_options_main_menu.1.g
		country_event = { id = age_overhaul_options_menu_decisions.1 }
	}

	# Open Sub-menu to Enable/Disable Age Ability Carryover
	option = {
		name = age_overhaul_options_main_menu.1.h
		country_event = { id = age_overhaul_options_menu_carryover.1 }
	}

	# Confirm settings
	option = {
		name = age_overhaul_options_main_menu.1.a
		highlight = yes
		set_global_flag = age_overhaul_initialized

		# Set Golden Splendor costs for 25%, 50%, and 75% strength abilities
		hidden_effect = {
			every_country = {
				# Set the 25% cost for Golden Splendor
				set_variable = {
					which = age_overhaul_golden_splendor_cost_25
					which = age_overhaul_golden_splendor_cost
				}
				divide_variable = {
					which = age_overhaul_golden_splendor_cost_25
					value = 4
				}

				# Set the 50% cost for Golden Splendor
				set_variable = {
					which = age_overhaul_golden_splendor_cost_50
					which = age_overhaul_golden_splendor_cost_25
				}
				multiply_variable = {
					which = age_overhaul_golden_splendor_cost_50
					value = 2
				}

				# Set the 75% cost for Golden Splendor
				set_variable = {
					which = age_overhaul_golden_splendor_cost_75
					which = age_overhaul_golden_splendor_cost_25
				}
				multiply_variable = {
					which = age_overhaul_golden_splendor_cost_75
					value = 3
				}
			}
		}

		if = {
			limit = {
				has_global_flag = age_overhaul_option_skipped_age
			}
			country_event = { id = age_overhaul_age_of_discovery.0 }
		}
	}
}
